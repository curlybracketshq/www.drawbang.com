<!DOCTYPE html>
<html xmlns:fb='http://www.facebook.com/2008/fbml'>
  <head>
    {% include head.html %}
    <meta content='Drawing {{ page.drawing_name }}' property='og:title'>
    <meta content='drawbang:drawing' property='og:type'>
    <meta content='{{ site.url }}/drawings/{{ page.drawing_name }}' property='og:url'>
    <meta content='{{ site.assets_root }}/{{ page.drawing_name }}' property='og:image'>
    <meta content='Do you like pixelart?' property='og:description'>
    <meta content='104119936347484' property='fb:app_id'>
  </head>
  <body>
    {% include header.html %}
    <div id='header'>
      <div class='content_wrapper'>
        <a href='/' title='Return to gallery'>
          <h1>DRAW!</h1>
          <h2>16x16 animated pixelart pictures</h2>
        </a>
      </div>
    </div>
    <div id='adv_top'>
      <script>
        //<![CDATA[
          google_ad_client = "ca-pub-7194529311513014";
          google_ad_slot = "9403034170";
          google_ad_width = 728;
          google_ad_height = 90;
        //]]>
      </script>
      <script src='http://pagead2.googlesyndication.com/pagead/show_ads.js' type='text/javascript'></script>
    </div>
    <div class='wrapper' id='container'>
      <div class='block'>
        <div class='content_wrapper'>
          {{ content }}
        </div>
      </div>
    </div>
    <div id='footer'></div>
    <div id='fb-root'></div>
    <script>
      //<![CDATA[
        window.fbAsyncInit = function() {
          FB.init({
            appId: '104119936347484',
            status: true,
            cookie: true,
            xfbml: true,
            frictionlessRequests: true
          });
        
          $(document).ready(function() {
            setTimeout(function() {
              manageRequests();
            }, 1000);
          });
        };
        
        (function() {
          var e = document.createElement('script'); e.async = true;
          e.src = document.location.protocol +
            '//connect.facebook.net/en_US/all.js';
          document.getElementById('fb-root').appendChild(e);
        }());
        
        // manage current user requests
        function manageRequests(request_ids) {
          if(typeof request_ids == 'object' && request_ids.length > 0) {
            request_ids.forEach(function(request_id) {
              FB.api(request_id, 'get', function(response) {
                if(response && response.from) {
                  $('#requests').append(
                    "<div class='request block' id='request_" + response.id + "'>" +
                    "<div class='from left isometric'><img class='avatar' width='25' src='http://graph.facebook.com/" + response.from.id + "/picture?type=square'></div>" +
                    "<div class='from_name'>" + response.from.name + ": <i>Would you like to fork <a href='" + response.data + "'>my drawing</a>?</i></div>" +
                    "<div class='delete'><a href='#' onclick='deleteRequest(\"" + response.id + "\")'>Delete notification</a></div>" +
                    "</div>"
                  );
                }
              });
            });
          }
        }
        
        function deleteRequest(request_id) {
          FB.api(request_id, 'delete', function(response) {
            if(response) {
              $('#request_' + request_id).remove();
            }
          });
        }
      //]]>
    </script>
    <script>
      //<![CDATA[
        (function() {
          var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
          po.src = 'https://apis.google.com/js/plusone.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
        })();
      //]]>
    </script>
    <script>
      //<![CDATA[
        !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
      //]]>
    </script>
    <script>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-2935139-17']);
        _gaq.push(['_trackPageview']);
        
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
        
        // AdSense Data
        window.google_analytics_uacct = "UA-2935139-17";
      //]]>
    </script>
    <link href='//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css' rel='stylesheet' type='text/css'>
    <script src='//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js'></script>
    <script>
      //<![CDATA[
        window.addEventListener("load", function(){
        window.cookieconsent.initialise({
          "palette": {
            "popup": {
              "background": "#000"
            },
            "button": {
              "background": "#f1d600"
            }
          }
        })});
      //]]>
    </script>
  </body>
</html>
